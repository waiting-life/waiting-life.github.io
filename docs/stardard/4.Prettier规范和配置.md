---
title: 'Prettier 规范和配置'
date: 2022-01-10
tag:
  - 前端标准化
categories:
  - 前端标准化
---

## linters

- 格式化规则
  - prettier
- 代码质量规则

## Usage

### 1. 本地安装 Prettier：

> 用 --save-exact 锁定版本
> prettier 不同版本会有排版差别

```shell
npm install --save-dev --save-exact prettier
yarn add --dev --exact prettier
```

- 排版

```shell
npx prettier --write .
```

- 格式校验

```shell
npx prettier --check .
```

- 关闭 ESLint/stylelint 格式化规则

```shell
eslint-config-prettier
stylelint-config-prettier
```

### 2. .prettierrc.js 配置

```js
module.exports = {
  semi: false,
  singleQuote: true,
}
```

### 3. 添加 .prettierignore 配置

Example：

```plain
# Ignore artifacts:
build
coverage
```

### 4. vscode 工作区配置

- 安装 Prettier - Code formatter 插件
- 工作区配置

首选项 -> 设置 -> 工作区 -> 打开设置（.json）

```json
{
  "prettier.enable": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "files.autoSave": "off",
  "editor.formatOnType": true,
  "editor.formatOnPaste": true,
  "editor.formatOnSave": true
}
```

### 5. Pre-commit Hook

#### 方式一：

- 安装 husky 和 lint-staged

```shell
npm install --save-dev husky lint-staged
npx husky install
npx husky add .husky/pre-commit "npx lint-staged"
```

- 添加 lint-staged 配置到 package.json
  > prettier 应放在 eslint/stylelint 之后

```json
"lint-staged": {
    "**/*": "prettier --check . --ignore-unknown"
  }
}
```

#### 方式二：

```shell
npm i mrm -g
npx mrm lint-staged
```

## Options

[https://prettier.io/docs/en/options.html](https://prettier.io/docs/en/options.html)

## Husky Deprecated：Git Hook 配置

husky 在 6.0.0 开始，进行了破坏性变更，以下方式废弃：

```bash
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
```

### 参考文章

- [prettier 官方文档](https://prettier.io/)
