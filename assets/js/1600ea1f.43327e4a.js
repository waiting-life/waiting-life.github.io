"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2321],{3905:function(e,n,t){t.d(n,{Zo:function(){return i},kt:function(){return m}});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=o.createContext({}),s=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):u(u({},n),e)),t},i=function(e){var n=s(e.components);return o.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),d=s(t),m=a,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||r;return t?o.createElement(f,u(u({ref:n},i),{},{components:t})):o.createElement(f,u({ref:n},i))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,u=new Array(r);u[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,u[1]=l;for(var s=2;s<r;s++)u[s]=t[s];return o.createElement.apply(null,u)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4868:function(e,n,t){t.r(n),t.d(n,{assets:function(){return i},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p}});var o=t(7462),a=t(3366),r=(t(7294),t(3905)),u=["components"],l={},c=void 0,s={unversionedId:"react/ReactHooks",id:"react/ReactHooks",title:"ReactHooks",description:"React\u51fd\u6570\u5f0f\u7ec4\u4ef6",source:"@site/docs/react/ReactHooks.md",sourceDirName:"react",slug:"/react/ReactHooks",permalink:"/docs/react/ReactHooks",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react/ReactHooks.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ReactAPI",permalink:"/docs/react/ReactAPI"},next:{title:"ReactRedux",permalink:"/docs/react/ReactRedux"}},i={},p=[{value:"React\u51fd\u6570\u5f0f\u7ec4\u4ef6",id:"react\u51fd\u6570\u5f0f\u7ec4\u4ef6",level:2},{value:"hook\u6267\u884c\u539f\u7406",id:"hook\u6267\u884c\u539f\u7406",level:2},{value:"\u95ee\u9898",id:"\u95ee\u9898",level:3},{value:"useState",id:"usestate",level:2},{value:"\u7ec3\u4e60\u4e00",id:"\u7ec3\u4e60\u4e00",level:3},{value:"\u7ec3\u4e60\u4e8c",id:"\u7ec3\u4e60\u4e8c",level:3},{value:"useEffect",id:"useeffect",level:2},{value:"\u7ec3\u4e60\u4e00",id:"\u7ec3\u4e60\u4e00-1",level:3},{value:"\u7ec3\u4e60\u4e8c",id:"\u7ec3\u4e60\u4e8c-1",level:3},{value:"\u7ec3\u4e60\u4e09",id:"\u7ec3\u4e60\u4e09",level:3},{value:"useRef",id:"useref",level:2},{value:"useMemo",id:"usememo",level:2},{value:"useCallback",id:"usecallback",level:2},{value:"useContext",id:"usecontext",level:2},{value:"\u7ec3\u4e60\u4e00",id:"\u7ec3\u4e60\u4e00-2",level:3},{value:"useImperativeHandle",id:"useimperativehandle",level:2},{value:"\u7ec3\u4e60\u4e00",id:"\u7ec3\u4e60\u4e00-3",level:3},{value:"\u7ec3\u4e60\u4e8c",id:"\u7ec3\u4e60\u4e8c-2",level:3}],d={toc:p};function m(e){var n=e.components,t=(0,a.Z)(e,u);return(0,r.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"react\u51fd\u6570\u5f0f\u7ec4\u4ef6"},"React\u51fd\u6570\u5f0f\u7ec4\u4ef6"),(0,r.kt)("p",null,"\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u6ca1\u6709\u4e00\u4e2a\u72b6\u6001\u53bb\u4fdd\u5b58\u8fd9\u4e9b\u72b6\u6001\uff0c\u6bcf\u4e00\u6b21\u51fd\u6570\u4e0a\u4e0b\u6587\u6267\u884c\uff0c\u6240\u6709\u53d8\u91cf\uff0c\u5e38\u91cf\u90fd\u91cd\u65b0\u58f0\u660e\uff0c\u6267\u884c\u5b8c\u6bd5\uff0c\u518d\u88ab\u5783\u573e\u673a\u5236\u56de\u6536"),(0,r.kt)("h2",{id:"hook\u6267\u884c\u539f\u7406"},"hook\u6267\u884c\u539f\u7406"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u7ec4\u4ef6\u521b\u5efa\u7684\u65f6\u5019\u4f1a\u6709\u4e00\u5757\u5173\u8054\u7684\u7ebf\u6027\u5b58\u50a8\u5355\u5143\uff08\u672c\u8d28\u4e0a\u662f\u94fe\u8868\u5b58\u50a8memorizedState\uff1a\u4ee5\u94fe\u8868\u7684\u5f62\u5f0f\u5b58\u653ehooks\u4fe1\u606f\uff09\u3002\u90a3\u4e48\u6bcf\u6b21\u6267\u884c\u6e32\u67d3\u51fd\u6570\u7684\u65f6\u5019\uff0c\u6839\u636eHook\u5728\u51fd\u6570\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e2aHook\u90fd\u6709\u6743\u8bbf\u95ee\uff08\u8bfb\u4e0e\u5199\uff09\u7ebf\u6027\u5b58\u50a8\u5355\u5143\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u4e2d\u7684\u6570\u636e\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u5f3a\u5236\u8981\u6c42\u6bcf\u6b21\u6267\u884c\u51fd\u6570\u65f6Hook\u51fa\u73b0\u7684\u987a\u5e8f\u90fd\u5fc5\u987b\u4e00\u81f4\u3002"))),(0,r.kt)("p",null,"react\u5f53\u6570\u636e\u6539\u53d8\u7684\u65f6\u5019\u5c31\u4f1a\u91cd\u65b0\u6e32\u67d3\uff0c\u8c03\u7528\u7ec4\u4ef6\u51fd\u6570\uff0c\nmemoizedState\uff1a\nuseState\u4e2d \u4fdd\u5b58 state \u4fe1\u606f\nuseEffect \u4e2d \u4fdd\u5b58\u7740 effect \u5bf9\u8c61\nuseMemo \u4e2d \u4fdd\u5b58\u7684\u662f\u7f13\u5b58\u7684\u503c\u548c deps\nuseRef \u4e2d\u4fdd\u5b58\u7684\u662f ref \u5bf9\u8c61\u3002"),(0,r.kt)("h3",{id:"\u95ee\u9898"},"\u95ee\u9898"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u591a\u4e2areact-hooks\u7528\u4ec0\u4e48\u6765\u8bb0\u5f55\u6bcf\u4e00\u4e2ahooks\u7684\u987a\u5e8f\u7684 \uff1f \u6362\u4e2a\u95ee\u6cd5\uff01\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u58f0\u660ehooks? hooks\u58f0\u660e\u4e3a\u4ec0\u4e48\u5728\u7ec4\u4ef6\u7684\u6700\u9876\u90e8\uff1f\n\u56e0\u4e3a\u4e00\u65e6\u5728\u6761\u4ef6\u8bed\u53e5\u4e2d\u58f0\u660e",(0,r.kt)("inlineCode",{parentName:"li"},"hooks"),"\uff0c\u5728\u4e0b\u4e00\u6b21\u51fd\u6570\u7ec4\u4ef6\u66f4\u65b0\u540e\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"hooks"),"\u94fe\u8868\u7ed3\u6784\u5c06\u4f1a\u88ab\u7834\u574f\uff0c\u5c31\u4f1a\u53d1\u751f\u5f02\u5e38\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// hooks\u94fe\u8868\n// [0,  { current: 0 }, [0], [fn, 'xx']]\nconst Test = () => { \n  //\u6240\u4ee5\u4e0d\u80fd\u5728\u6761\u4ef6\u5224\u65ad\u91cc\u9762\u5199hook\n  const [count, setCount] = useState(0)   \n\n  const myRef = useRef(count)\n  myRef.current = count\n\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(count)\n    }, 3000);\n  }, [count])\n\n  const fn = useCallback(() => {\n    console.log(myRef.current)\n  }, [])\n\n  const handleCount = () => {\n    setCount(count+10)\n  }\n  return (\n    <div>\n      <div>{count}</div>\n      <Button onClick={handleCount} type=\"primary\">\u70b9\u51fb</Button>\n    </div>\n  )\n}\n")),(0,r.kt)("h2",{id:"usestate"},"useState"),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e00"},"\u7ec3\u4e60\u4e00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const Test = () => { \n  const [count, setCount] = useState(0)    \n\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(count)\n    }, 3000);\n  }, [count])\n\n  return (\n    <div>\n      <div>count:{count}</div>\n      <Button onClick={() => setCount(count => count+1)} type="primary">\u70b9\u51fbcount+1</Button>\n    </div>\n  )\n}\nexport default Test\n')),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e8c"},"\u7ec3\u4e60\u4e8c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// [1]\nconst Test = () => {\n  const [id, setId] = useState(1)\n  // \u5f53Child\u7ec4\u4ef6\u7684key\u4fee\u6539\u7684\u65f6\u5019\uff0cChild\u7ec4\u4ef6\u4f1a\u88ab\u9500\u6bc1\u91cd\u65b0\u751f\u6210\n  return (\n    <div>\n        <Child key={id} />  \n        <Button onClick={() => setId(2)}>\u66f4\u65b0key</Button>\n    </div>\n  )\n}\n\nexport default Test\n\n// [100]\nfunction Child() {\n  const [count, setCount] = useState(100)\n\n  return <div>\n    {count}\n    <Button onClick={() => setCount(count => count + 100)}>\u70b9\u51fb</Button>\n    </div>\n}\n")),(0,r.kt)("h2",{id:"useeffect"},"useEffect"),(0,r.kt)("p",null,"\u4e0ecomponentDisMount\u548ccomponentDisUpdate\u4e0d\u540c\u7684\u662f\uff0c\u4f20\u7ed9useEffect\u7684\u51fd\u6570\u4f1a\u5728\u6d4f\u89c8\u5668\u5b8c\u6210\u5e03\u5c40\u4e0e\u7ed8\u5236\u4e4b\u540e\uff0c\u5728\u4e00\u4e2a\u5ef6\u8fdf\u65f6\u95f4\u4e2d\u88ab\u8c03\u7528\u3002"),(0,r.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7useEffec\u6765\u5b9e\u73b0\u4e00\u4e9b\u751f\u547d\u5468\u671f\u7684\u529f\u80fd\uff0c\u7ec4\u4ef6\u6302\u5728\uff0c\u7ec4\u4ef6\u66f4\u65b0\uff0c\u7ec4\u4ef6\u5378\u8f7d"),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e00-1"},"\u7ec3\u4e60\u4e00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function UseEffectCom() {\n  const [count, setCount] = useState(0)\n  const [person, setPerson] = useState({name: 'cpp', age: 22})\n  // 1. \u4e0d\u4f20\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u6bcf\u6b21\u6570\u636e\u4fee\u6539\u91cd\u65b0\u6e32\u67d3\u7684\u65f6\u5019\uff0cuseEffect\u90fd\u4f1a\u8c03\u7528\u4f20\u7684\u51fd\u6570\n  // 2. \u4f20\u5165\u7b2c\u4e8c\u4e2a\u6570\u7ec4\u5305\u542b\u4f9d\u8d56\u7684\u6570\u7ec4\uff0cuseEffect\u4f1a\u6839\u636e\u5bf9\u5e94\u4f9d\u8d56\u7684\u53d8\u5316\u6765\u8c03\u7528\u51fd\u6570\n  // 3. \u5f53\u4f20\u5165[]\u7684\u65f6\u5019\uff0c\u53ea\u6709\u5728\u7b2c\u4e00\u6b21\u7ec4\u4ef6\u6e32\u67d3\u65f6\u4f1a\u8c03\u7528\u51fd\u6570\n  useEffect(() => {\n    console.log(`count: -------${count}`)\n    console.log(`person: --------${person}`)\n  }, [])\n  return (\n    <div>\n      <Button onClick={() => setCount(count => count+1)}>\u70b9\u51fb+1</Button>\n      <Button onClick={() => setPerson({name: 'cjz', age: 24})}>\u4fee\u6539\u4fe1\u606f</Button>\n    </div>\n  )\n}\n")),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e8c-1"},"\u7ec3\u4e60\u4e8c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function UseEffectCom() {\n  const [count, setCount] = useState(0)\n  const [person, setPerson] = useState({name: 'cpp', age: 22})\n  useEffect(() => {\n    console.log(`count: -------${count}`)\n    console.log(`person: --------${person}`)\n    let timer = setTimeout(() => {\n      console.log(count, '?????')\n    }, 500);\n    // \u5728\u7ec4\u5efa\u5378\u8f7d\u4e4b\u524d\u5904\u7406\u4e00\u4e9b\u64cd\u4f5c\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [count])\n  return (\n    <div>\n      <Button onClick={() => setCount(count => count+1)}>\u70b9\u51fb+1</Button>\n      <Button onClick={() => setPerson({name: 'cjz', age: 24})}>\u4fee\u6539\u4fe1\u606f</Button>\n    </div>\n  )\n}\n\n")),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e09"},"\u7ec3\u4e60\u4e09"),(0,r.kt)("p",null,"\u7ec4\u4ef6\u5378\u8f7d\u524d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function UseEffectCom() {\n  const [count, setCount] = useState(0)\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      console.log(count, '?????')\n    }, 4000);\n    // \u5728\u7ec4\u5efa\u5378\u8f7d\u4e4b\u524d\u5904\u7406\u4e00\u4e9b\u64cd\u4f5c\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [])  // \u6a21\u62df\u7ec4\u4ef6\u5378\u8f7d\u524d\uff0c\u8fd9\u91cc\u5e94\u4e3a[]\n  return (\n    <div>\n      <Button onClick={() => setCount(count => count+1)}>\u70b9\u51fb+1</Button>\n    </div>\n  )\n}\n")),(0,r.kt)("h2",{id:"useref"},"useRef"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4e0d\u540c\u51fd\u6570\u4f5c\u7528\u57df\u53ef\u4ee5\u5f15\u7528\u5230\u540c\u4e00\u4e2a\u503c\uff0c\u53c8\u4e0d\u5e0c\u671b\u8fd9\u4e2a\u503c\u7684\u66f4\u65b0\u89e6\u53d1\u6e32\u67d3\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528useRef")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const Test = () => { \n  const [count, setCount] = useState(0)    \n  // \u4e0d\u540c\u51fd\u6570\u4f5c\u7528\u57df\u53ef\u4ee5\u5f15\u7528\u5230\u540c\u4e00\u4e2a\u503c\uff0c\u53c8\u4e0d\u5e0c\u671b\u8fd9\u4e2a\u503c\u7684\u66f4\u65b0\u89e6\u53d1\u6e32\u67d3\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528useRef\n  const myRef = useRef(count)\n  myRef.current = count\n\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(count)\n      // myRef.current\u7684\u4fee\u6539\u4e0d\u4f1a\u89e6\u53d1\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\n      console.log(myRef.current)\n    }, 3000);\n  }, [count])\n\n  return (\n    <div>\n      <div>count:{count}</div>\n      <div>\u5c06count\u8d4b\u503c\u7ed9ref.current: {myRef.current}</div>\n      <Button onClick={() => setCount(count => count+1)} type="primary">\u70b9\u51fbcount+1</Button>\n      <Button onClick={() => myRef.current+=1 } type="primary">\u70b9\u51fbref.current+1</Button>\n    </div>\n  )\n}\nexport default Test\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"useRef\u8fd8\u53ef\u4ee5\u7528\u6765\u8bb0\u5f55DOM\u8282\u70b9\u7684\u5f15\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useRef } from "react"\nexport default function UseRefCom() {\n  const ref = useRef<HTMLDivElement>(null!)\n  return (\n    <div ref={ref} onClick={() => console.log(ref.current.innerText)}>\n      \u70b9\u51fb\n    </div>\n  )\n}\n')),(0,r.kt)("h2",{id:"usememo"},"useMemo"),(0,r.kt)("p",null,"\u8fd4\u56de\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"memoized"),"\u503c\uff0c\u5b83\u4ec5\u4f1a\u5728\u67d0\u4e2a\u4f9d\u8d56\u6539\u53d8\u65f6\u91cd\u65b0\u8ba1\u7b97",(0,r.kt)("inlineCode",{parentName:"p"},"memoized"),"\u503c\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u4f9d\u8d56\u9879\u6570\u7ec4\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"useMemo\u4f1a"),"\u5728\u6bcf\u6b21\u6e32\u67d3\u662f\u90fd\u8ba1\u7b97\u65b0\u7684\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function UseMemoCom() {\n  const [a, setA] = useState(0)\n  const [b, setB] = useState(0)\n\n  const memoized = useMemo(() => {\n    return a+b\n  }, [a, b])\n\n  return (\n    <div>\n      <div>sum: {memoized}</div>\n      <InputNumber defaultValue={0} onChange={(value) => setA(value)}/>\n      <InputNumber defaultValue={0} onChange={(value) => setB(value)}/>\n    </div>\n  )\n}\n\n")),(0,r.kt)("h2",{id:"usecallback"},"useCallback"),(0,r.kt)("p",null,"\u8fd4\u56de\u4e00\u4e2amemoized\u56de\u8c03\u51fd\u6570\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4ec5\u5728\u67d0\u4e2a\u4f9d\u8d56\u9879\u6539\u53d8\u65f6\u624d\u4f1a\u66f4\u65b0\n",(0,r.kt)("inlineCode",{parentName:"p"},"useCallback(fn, deps)"),"\u76f8\u5f53\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"useMemo(() => fn, deps)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function UseCallbackCom() {\n  const [a, setA] = useState(0)\n  const [b, setB] = useState(0)\n  const [sum, setSum] = useState(0)\n\n  return (\n    <div>\n      <div>sum: {sum}</div>\n      <InputNumber defaultValue={0} onChange={(value) => setA(value)} />\n      <InputNumber defaultValue={0} onChange={(value) => setB(value)} />\n      <Button onClick={useCallback(() => setSum(a+b), [a, b])}>\u76f8\u52a0</Button>\n    </div>\n  )\n}\n\n")),(0,r.kt)("h2",{id:"usecontext"},"useContext"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useContext(MyContext)"),"\u53ea\u662f\u8ba9\u4f60\u80fd\u591f\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"context")," \u7684\u503c\u4ee5\u53ca\u8ba2\u9605 ",(0,r.kt)("inlineCode",{parentName:"p"},"context")," \u7684\u53d8\u5316\u3002\u4f60\u4ecd\u7136\u9700\u8981\u5728\u4e0a\u5c42\u7ec4\u4ef6\u6811\u4e2d\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"<MyContext.Provider>")," \u6765\u4e3a\u4e0b\u5c42\u7ec4\u4ef6\u63d0\u4f9b ",(0,r.kt)("inlineCode",{parentName:"p"},"context"),"\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useContext")," \u7684\u53c2\u6570\u5fc5\u987b\u662f ",(0,r.kt)("em",{parentName:"p"},"context \u5bf9\u8c61\u672c\u8eab"),"\uff1a"),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e00\u65e6\u6211\u4eec\u7ec4\u4ef6\u4f7f\u7528\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"useContext()"),"\uff0c\u90a3\u4e48\u4e00\u65e6",(0,r.kt)("inlineCode",{parentName:"p"},"Provider"),"\u4f20\u9012\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"value"),"\u5730\u5740\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u5c31\u4f1a\u89e6\u53d1\u6211\u4eec\u7ec4\u4ef6\u7684\u91cd\u65b0\u6e32\u67d3\u3002"))),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e00-2"},"\u7ec3\u4e60\u4e00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, {useContext} from \'react\'\n\nconst themes = {\n  light: {\n    foreground: "#000000",\n    background: "#eeeeee"\n  },\n  dark: {\n    foreground: "#ffffff",\n    background: "#222222"\n  }\n};\n// \u4e3a\u5f53\u524d\u7684theme\u521b\u5efa\u4e00\u4e2acontext\u5bf9\u8c61\nconst ThemeContext = React.createContext(themes.light)\n\nexport default function UseContextCom() {\n  return (\n    // \u4f7f\u7528\u4e00\u4e2a Provider \u6765\u5c06\u5f53\u524d\u7684theme\u4f20\u9012\u7ed9\u4ee5\u4e0b\u7684\u7ec4\u4ef6\u6811\uff0c\u65e0\u8bba\u591a\u6df1\uff0c\u4efb\u4f55\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u8bfb\u53d6\u8fd9\u4e2a\u503c\n   <ThemeContext.Provider value={themes.dark}>\n     <ToolBar/>\n   </ThemeContext.Provider>\n  )\n}\n\n// \u4e2d\u95f4\u7ec4\u4ef6\u4e0d\u7528\u518d\u6307\u660e\u5411\u4e0b\u4f20\u9012\nfunction ToolBar() {\n  return <ThemeButton/>\n}\n\nfunction ThemeButton() {\n  // useContext\u63a5\u53d7context\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\n  const theme = useContext(ThemeContext)\n  return <button style={{background: theme.background, color: theme.foreground}}>thmeme</button>\n}\n')),(0,r.kt)("h2",{id:"useimperativehandle"},"useImperativeHandle"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle(ref, createHandle, [deps])"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"\u53ef\u4ee5\u8ba9\u4f60\u5728\u4f7f\u7528ref\u65f6\u81ea\u5b9a\u4e49\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u503c\n",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"\u5e94\u5f53\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef"),"\u4e00\u8d77\u4f7f\u7528"),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e00-3"},"\u7ec3\u4e60\u4e00"),(0,r.kt)("p",null,"\u76f4\u63a5\u7ed9\u7ec4\u4ef6\u4f20ref\u7684\u8bdd\uff0c\u662f\u6ca1\u7528\u7684\u3002\u5982\u679c\u60f3\u628aref\u4f20\u9012\u7ed9\u7ec4\u4ef6\u5185\u90e8\u7684\u5143\u7d20\uff0c\u5fc5\u987b\u642d\u914d",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { forwardRef, useImperativeHandle, useRef } from 'react'\nimport { Button, Input } from 'antd'\n\nexport default function UseImperativeHandleCom() {\n  const inputRef = useRef<any>(null)\n  const inputRef1 = useRef<any>(null)\n\n  const handleFocus = () => {\n    console.log(inputRef) // {current: null}\n  }\n  const handleFocusRef = () => {\n    console.log(inputRef1)  // {current: input}\n    inputRef1.current?.focus();\n  }\n  return (\n    <div>\n      <FancyInput ref={inputRef} />\n      <FancyInput1 ref={inputRef1} />\n      <Button onClick={handleFocus}>\u7ec4\u4ef6\u672a\u7ed3\u5408forwardRef\uff0c\u70b9\u51fbfocus</Button>\n      <Button onClick={handleFocusRef}>\u7ed3\u5408forwardRef\uff0c\u70b9\u51fbfocus</Button>\n    </div>\n  )\n}\n\nconst FancyInput =(props: any) => {\n  return <input  />\n}\nconst FancyInput1 = forwardRef((props, ref: any) => {\n  return <input ref={ref} />\n})\n\n")),(0,r.kt)("h3",{id:"\u7ec3\u4e60\u4e8c-2"},"\u7ec3\u4e60\u4e8c"),(0,r.kt)("p",null,"\u642d\u914d",(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { forwardRef, useImperativeHandle, useRef } from 'react'\nimport { Button, Input } from 'antd'\n\nexport default function UseImperativeHandleCom() {\n  const inputRef = useRef<any>(null)\n\n  const handleFocus = () => {\n    console.log(inputRef) // {current: {focus: () => }}\n  }\n  return (\n    <div>\n      <FancyInput ref={inputRef} />\n      <Button onClick={handleFocus}>\u7ec4\u4ef6\u7ed3\u5408forwardRef\uff0cuseImperativeHandle, \u70b9\u51fbfocus</Button>\n    </div>\n  )\n}\n\nconst FancyInput = forwardRef((props: any, ref: any) => {\n  const inputRef = useRef<any>(null)\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      inputRef.current.focus()\n    }\n  }))\n  return <input ref={inputRef} />\n})\n\n")))}m.isMDXComponent=!0}}]);