---
title: '@bdwjs'
date: 2022-01-10
tag:
  - 前端标准化
categories:
  - 前端标准化
---

> 此指南说明如下：
>
> - eslint 配置目前只适用 vue3(ts),
> - stylelint 配置目前支持 scss,
> - 其它可通用

## 一、vscode 配置

1. 安装 Prettier - Code formatter、ESLint 、stylelint 扩展
2. 工作区配置

首选项 -> 设置 -> 工作区 -> 打开设置（.json）

会创建.vscode/settings.json 文件，添加以下配置项

```json
# .vscode/settings.json
{
  "prettier.enable": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "files.autoSave": "off",
  "editor.formatOnType": true,
  "editor.formatOnPaste": true,
  "editor.formatOnSave": true

  "eslint.alwaysShowStatus": true, // 总是在 VSCode 显示 ESLint 的状态
  "eslint.quiet": false, // 显示 warning 的错误
  "editor.codeActionsOnSave": {
    "source.fixAll": true // 保存时使用 eslint/stylelint 修复可修复错误
  }
```

**使用**

ctrl + s 自动修复

## 二、 prettier

1. 安装依赖

```shell
yarn add @bdwjs/prettier-config -D
```

2. 配置 `.prettierrc.js`

```js
const fabric = require('@bdwjs/prettier-config')

module.exports = {
  ...fabric,
}
```

## 三、 stylelint

> 目前支持 scss

1. 安装依赖

```shell
yarn add @bdwjs/stylelint-config -D
```

2. 配置 `.stylelintrc.js`

```shell
module.exports = {
  root: true,
  extends: ['@bdwjs/stylelint-config'],
}
```

## 四、 eslint

> 支持: vue3(ts)

1. 安装依赖

```shell
yarn add @bdwjs/eslint-config -D
```

2. 配置 `.eslintrc.js`

```shell
module.exports = {
  root: true,
  extends: ['@bdwjs'],
  rules: {
    'global-require': 'off',
    'arrow-body-style': 'off',
    'vue/attribute-hyphenation': 'off',
    'no-use-before-define': 'off',
    'no-restricted-syntax': 'off',
    'array-callback-return': 'off',
    'guard-for-in': 'off',
  },
}
```

## 五、 commitlint

1. 安装依赖

```shell
yarn add @bdwjs/commitlint-config -D
```

2. 配置 `commitlint.config.js` 文件

```shell
echo -e "module.exports = {\n  extends: ['@bdwjs/commitlint-config'],\n}" > ./commitlint.config.js
```

### 六、 Pre-commit Hook

#### 方式一：

- 安装 husky 和 lint-staged

```shell
yarn add husky lint-staged -D
yarn husky install
yarn husky add .husky/pre-commit "npx lint-staged"
yarn husky add .husky/commit-msg 'yarn commitlint --edit $1'
```

- 添加 lint-staged 配置到 package.json
  > prettier 应放在 eslint/stylelint 之后

```json
"lint-staged": {
    "src/**/*.{js,ts,vue}": "eslint --fix --ignore-path .eslintignore",
    "src/**/*.{less,sass,css,vue}": "stylelint --fix --ignore-path .eslintignore",
    "**/*": "prettier --check . --ignore-unknown"
  }
}
```

#### 方式二：

```shell
npm i mrm -g
npx mrm lint-staged
```

## 七、配置`scripts`命令

1.项目根目录添加 .eslintignore 文件，里面表示不需要检验的目录

```
build/*.js
src/assets
public
dist

# 类型
typings

# 第三方库
wxcomponents
qqmap-wx-jssdk1.2
tki-qrcode
```

**说明**

根据需要设置

2. package.json 中的 scripts 里添加

```json
"lint:js": "eslint --fix --ext \".js,.vue,.ts\" src",
"lint:style": "stylelint --fix \"src/**/*.{vue,css,less,scss}\" --ignore-path .eslintignore",
```

**说明**

`--ignore-path`: 参数指定 eslint、stylelint 忽略`配置文件`,其内表示不需要检验的目录
