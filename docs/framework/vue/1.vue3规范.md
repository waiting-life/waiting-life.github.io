---
title: 'vue3规范'
date: 2022-01-10
tag:
  - vue
categories:
  - vue
---

> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/weixin_46242909/article/details/114012729)

## [Vue](https://so.csdn.net/so/search?from=pc_blog_highlight&q=Vue) - 解决子组件中修改 props 值报错

![](https://img-blog.csdnimg.cn/20210224104223242.png#pic_center)

其实这就是 Vue 的`单向数据流`的概念

> 单向数据流

- `父级prop`的更新会向下流动到子组件中，子组件中所有的 prop 都将会刷新为最新的值
- 但是反过来则不行。你不应该在一个子组件内部改变 prop。否则 Vue 会在浏览器的控制台中发出如上图的警告

> 这是 Vue 官方防止从子组件意外变更父级组件的状态内容，这样会导致你应用的数据流向杂乱无章。

<table><tbody><tr><td bgcolor="PowderBlue">那么怎么解决呢？很简单</td></tr></tbody></table>

_**修改 prop 的两种情形：**_

> ①：这个 prop 用来传递一个初始值；这个子组件接下来希望将其作为一个本地的 prop 数据来使用。在这种情况下，最好定义一个`本地的data prop` 并将这个本地 prop 当作其初始值：

```js
props: ['goodsItem'],
data: function () {
  return {
    localGoods: this.goodsItem
  }
}
```

> ②：如果这个 prop 以一种原始的值传入且需要进行转换。在这种情况下，最好使用这个 prop 的值来定义一个计算属性：

```js
props: ['goodsItem'],
computed: {
  normalizedSize: function () {
    return this.goodsItem.trim().toLowerCase()
  }
}
```

注意：在 JavaScript 中对象和数组是通过引用传入的，所以对于一个数组或对象类型的 prop 来说，在子组件中改变变更这个对象或数组本身将会影响到父组件的状态。
