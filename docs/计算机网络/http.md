## HTTP协议
HTTP是一种不保存状态，即无状态协议。
有了Cookie， HTTP协议通信时，可以管理状态
### HTTP状态码
1. 404的含义就是客户端所访问的资源不存在
2. 304 缓存
3. 301永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替
4. 302临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI
5. 200 得到响应
6. 500服务器内部错误，无法完成请求

### 请求方法
+ GET请求的参数放在URL里面，POST请求的参数放在实体里
+ GET请求比起POST请求更加不安全，因为参数放在URL里面，不能用来传递敏感信息
+ GET请求的参数放在URL里面所以会有长度的限制；而POST请求没有限制

### HTTP报文

### HTT协议比较
#### HTTP1.0和HTTP1.1
1. HTTP1.0默认不开启长连接，浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个TCP连接服务器完成请求处理后立即断开TCP连接，HTTP1.1默认开启长连接，一个TCP连接里面可以发送多个请求，但服务器还是会按照收到请求的顺序响应。
2. HTTP1.0不支持host头部，HTTP1.1支持，可以实现虚拟主机
3. HTTP1.1比HTTP1.0增加了缓存控制的头部，如`If-None-Match`, `Etag`,`Cache-Control`等
4. 对带宽进行优化

#### HTTP1.1和HTTP2.0
1. 多路复用：HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了”队头堵塞”
2. 二进制分帧：HTTP2.0采用二进制格式传输，HTTP1.1采用文本传输
3. 首部压缩：对报文的头部进行压缩，在客户端和服务端都维护着一份字典记录着头部对应的索引
服务器推送

### TCP
TCP位于**传输层**，提供**可靠的字节流**服务。
1. 所谓的字节流，是指为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理。
2. 而可靠的传输服务是指，能够把数据可靠的传给对方。

**TCP协议为了更容易传送大数据才把数据分割，而TCP协议能够确认数据最终是否送达对方**
#### TCP三次握手
为了准确无误的将数据送达目标处。TCP协议采用了**三次握手**策略
### DNS服务
DNS协议位于应用层。它提供域名和IP地址之间的解析服务

### 加密
加密算法是公开的，但是密钥是保密的。
加密和解密都会用到密钥。如果没有密钥就无法对密码解密。
**对称密钥加密(共享密钥加密)**：加密和解密使用同一个密钥
难以做到把密钥安全的送达给对方
**非对称密钥加密(公开密钥加密方式)**：使用一对非对称的密钥。一把叫做私有密钥，另一把叫做公开密钥
公钥可以把明文加密成密文，而私钥可以把密文解密成明文
发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，使用自己的的私有密钥进行解密。
非对称加密算法在性能上比对称加密算法差
**混合加密算法**：
使用随机生成函数来生成一对密钥，利用公钥对密钥进行加密，这样就能解决密钥的配送难题了。

### 中间人攻击
混合加密基本上保证了数据的机密性，只要你能确定你所使用的公钥确实是对方发出的。
通常A和B进行加密通信的时候，A会向B发送自己的公钥，然后B利用公钥把对称加密要使用的密钥进行加密发送给A，A再用自己的私钥对密钥进行解密。
A和B通过对称密钥进行通信。

**中间人攻击**：
A向B发送自己的公钥时，公钥被黑客截取。然后黑客把自己的公钥发送给A，B误以为是A的公钥，结果使用了黑客的公钥对自己的消息加密发送。黑客获取到了加密后的消息后，就可以用自己的私钥解密，就获取到B发送的明文了。
解决方法：CA证书 【公钥+数字签名】

1. 服务器把自己的公开密钥登录至数字证书认证机构
2. 数字认证机构用自己的私有密钥向服务器的公开密码署数字签名并颁发公钥证书。
3. 客户端拿到服务器的公钥证书后，使用数字证书认证机构的公开密钥，向数字证书认证机构验证公钥证书上的数字签名，以确认服务器的公开密钥的真实性。
4. 使用服务器的公开密钥对报文加密后发送
5. 服务器使用私有密钥对报文进行解密

### HTTPS
**HTTPS采用对称密钥和非对称密钥两者并用的混合加密机制。**
我们把加了加密和认证机构的HTTP称为HTTPS
HTTP+加密+认证+完整性保护=HTTPS
HTTPS并非是应用层的一种新协议。只是HTTP通信接口部分用SSL和TLS协议代替而已
通常，HTTP直接和TCP通信。当使用SSL时，则演变成HTTP先和SSL通信，再由SSL和TCP通信。
#### SSL
SSL是独立于HTTP的协议，所以不光是HTTP协议，其他运行在应用层的其他协议如SMTP等都可以配合SSL使用
再采用SSL之后，HTTP就拥有了HTTPS的加密，证书，和完整性保护这些功能
SSL采用一种叫做公开密钥加密的加密处理方式
加密和解密都会用到密钥。如果没有密钥就无法对密码解密。

### HTTP对比HTTPS
HTTP的不足：
+ 通信使用明文(不加密)，内容可能会被窃听
+ 不验证通信方的身份，因此有可能遭遇伪装
+ 无法证明报文的完整性，可能被篡改。

HTTPS：
+ 使用SSL时，HTTPS的处理虚度会变慢
SSL的慢分为两种
1. 通信慢
2. 由于大量消耗CPU及内存资源，导致处理速度变慢


#### 为什么不一直使用HTTPS
1. 与纯文本通信相比，加密通信会消耗更多的CPU及其内存资源。
2. 要进行HTTPS通信，证书时必不可少的。

因此，如果非敏感的信息使用HTTP通信，只有再包含个人信息等敏感数据时，才使用HTTPS同学新。

