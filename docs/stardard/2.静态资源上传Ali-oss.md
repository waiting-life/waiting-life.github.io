---
title: '静态资源上传'
date: 2022-01-10
tag:
  - 前端标准化
categories:
  - 前端标准化
---

## 安装 @betterwood/ali-oss

```shell
npm i @betterwood/ali-oss -D
```

## 项目根目录下增加配置 alioss.config.js

```js
const path = require('path')

module.exports = {
  oss: {
    accessKeyId: 'xxx',
    accessKeySecret: 'xxx',
    region: 'xxx',
    bucket: 'xxx',
  },
  task: [
    {
      source: path.resolve(__dirname, 'resources'),
      publicPath: '/xxx/***/',
    },
  ],
}
```

**说明**：

- 会将 dist 下的所有文件，上传至阿里云 oss bucket 名为 mfsports 下的 publicPath 目录中
- source 参数使用相对路径，通过 path.resolve 生成绝对路径
- publicPath 参数前后需加 /

## 上传命令

- 默认命令

```shell
npx oss  # 默认会使用根目录下 alioss.config.js 配置
```

- 指定配置文件

```shell
npx oss --config alioss.production.js
```

- 指定参数（推荐生产环境，accessKeyId、accessKeySecret 通过参数传入）

```shell
npx oss --config alioss.production.js --accessKeyId xxx --accessKeySecret xxx
```
